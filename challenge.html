<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fitness Factory â€“ ØªØ­Ø¯ÙŠ 90 ÙŠÙˆÙ…</title>
  <style>
    :root {
      --bg: #020617;
      --card: #020b23;
      --card-soft: #020a1c;
      --border: #0f172a;
      --text: #e5e7eb;
      --muted: #9ca3af;
      --accent: #007aff;
      --accent-soft: #00ff87;
      --accent-red: #fb7185;
      --radius-lg: 18px;
      --radius-md: 12px;
    }

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #0b1220 0, #020617 45%, #000 100%);
      color: var(--text);
      font-family: system-ui, -apple-system, "Segoe UI", Roboto,
        "Noto Sans Arabic", "Tajawal", sans-serif;
      display: flex;
      justify-content: center;
      padding: 16px;
    }

    .wrap {
      width: 100%;
      max-width: 980px;
    }

    /* -------- Ø§Ù„Ù‡ÙŠØ¯Ø± -------- */

    .top {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 16px;
      margin-bottom: 16px;
    }

    .brand-area {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo {
      width: 52px;
      height: 52px;
      border-radius: 18px;
      background: radial-gradient(circle at 15% 0%, #00ff87 0, #00ff87 8%, #007aff 46%, #020617 100%);
      display: grid;
      place-items: center;
      overflow: hidden;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.7);
    }

    .logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .brand-text h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 800;
    }

    .brand-text h1 span {
      color: var(--accent-soft);
    }

    .brand-text p {
      margin: 2px 0 0;
      font-size: 13px;
      color: var(--muted);
    }

    .badge-small {
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.3);
      font-size: 11px;
      color: var(--muted);
      background: rgba(15, 23, 42, 0.7);
    }

    /* -------- Ø§Ù„ÙƒØ±ÙˆØª Ø§Ù„Ø¹Ø§Ù…Ø© -------- */

    .card {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.96), rgba(15, 23, 42, 0.86));
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 16px 18px;
      margin-bottom: 14px;
      box-shadow: 0 14px 30px rgba(0, 0, 0, 0.55);
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px;
      gap: 8px;
    }

    .card-header h2 {
      margin: 0;
      font-size: 16px;
    }

    .card-header span {
      font-size: 11px;
      color: var(--muted);
    }

    .two-col {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    @media (max-width: 640px) {
      .two-col {
        grid-template-columns: 1fr;
      }

      .top {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    label {
      display: block;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 4px;
    }

    input[type="text"],
    input[type="number"],
    input[type="date"],
    select,
    textarea {
      width: 100%;
      background: #020617;
      border-radius: var(--radius-md);
      border: 1px solid #1f2937;
      color: var(--text);
      padding: 9px 11px;
      font-size: 13px;
      outline: none;
      transition: border-color 0.15s ease, box-shadow 0.15s ease,
        background 0.15s ease;
    }

    input:focus,
    select:focus,
    textarea:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(37, 99, 235, 0.4);
      background: #02081b;
    }

    textarea {
      min-height: 70px;
      resize: vertical;
    }

    .hint {
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    /* -------- Ø³Ø¬Ù„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† -------- */

    .exercise-table-wrapper {
      border-radius: var(--radius-md);
      border: 1px solid #111827;
      background: radial-gradient(circle at top left, #020b23, #020617 50%);
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      min-width: 620px;
    }

    thead {
      background: rgba(15, 23, 42, 0.95);
    }

    th,
    td {
      padding: 6px 8px;
      border-bottom: 1px solid #0b1220;
      border-left: 1px solid #02081a;
      font-size: 11.5px;
    }

    th {
      text-align: center;
      color: var(--muted);
      font-weight: 500;
      white-space: nowrap;
    }

    td {
      background: rgba(15, 23, 42, 0.7);
    }

    td:first-child,
    th:first-child {
      position: sticky;
      right: 0;
      background: rgba(15, 23, 42, 0.9);
      z-index: 2;
    }

    .exercise-input {
      width: 100%;
      background: rgba(15, 23, 42, 0.9);
      border-radius: 8px;
      border: 1px solid #111827;
      color: var(--text);
      padding: 5px 6px;
      font-size: 12px;
    }

    .set-group {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 4px;
    }

    .set-field {
      background: rgba(15, 23, 42, 0.9);
      border-radius: 8px;
      border: 1px solid #111827;
      color: var(--text);
      padding: 4px 5px;
      font-size: 11px;
    }

    .exercise-row:nth-child(even) td {
      background: rgba(15, 23, 42, 0.9);
    }

    .actions-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 10px;
      gap: 8px;
      flex-wrap: wrap;
    }

    /* -------- Ø£Ø²Ø±Ø§Ø± -------- */

    .btn {
      border-radius: 999px;
      border: none;
      cursor: pointer;
      padding: 8px 14px;
      font-size: 13px;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      transition: transform 0.06s ease, box-shadow 0.12s ease, filter 0.12s ease;
      white-space: nowrap;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--accent), #22c1f1);
      color: #0b1120;
      box-shadow: 0 8px 20px rgba(37, 99, 235, 0.5);
    }

    .btn-outline {
      background: transparent;
      color: var(--muted);
      border: 1px solid #374151;
    }

    .btn-ghost {
      background: transparent;
      color: var(--accent-red);
      border: none;
      padding-inline: 4px;
      font-size: 11px;
    }

    .btn:hover {
      filter: brightness(1.03);
      transform: translateY(-1px);
    }

    .btn:active {
      transform: translateY(0);
      box-shadow: none;
    }

    /* -------- ÙƒØ§Ø±Ø¯ÙŠÙˆ + Ù…Ù„Ø§Ø­Ø¸Ø§Øª -------- */

    .sub-grid {
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 8px;
    }

    @media (max-width: 720px) {
      .sub-grid {
        grid-template-columns: 1fr;
      }
    }

    .footer-note {
      text-align: center;
      font-size: 11px;
      color: var(--muted);
      margin-top: 4px;
    }

    .footer-note a {
      color: var(--accent-soft);
      text-decoration: none;
    }

    .footer-note a:hover {
      text-decoration: underline;
    }

    .pill-info {
      font-size: 11px;
      color: var(--muted);
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px dashed #4b5563;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      margin-top: 4px;
    }

    .pill-info span {
      font-size: 13px;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <!-- Ø§Ù„Ù‡ÙŠØ¯Ø± -->
    <div class="top">
      <div class="brand-area">
        <div class="logo">
          <!-- Ø¥Ø°Ø§ Ø¹Ù†Ø¯Ùƒ ff_log.svg ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù…Ø¬Ù„Ø¯ Ø®Ù„Ù‘ÙŠ Ø§Ù„Ø³Ø·Ø± Ù‡Ø°Ø§ -->
          <img src="ff_log.svg" alt="Fitness Factory logo" />
        </div>
        <div class="brand-text">
          <h1><span>ØªØ­Ø¯ÙŠ 90 ÙŠÙˆÙ…</span> â€“ Fitness Factory</h1>
          <p>Ø¯ÙØªØ± ØªØ¯Ø±ÙŠØ¨ Ø±Ù‚Ù…ÙŠ Ù„ØªØ³Ø¬ÙŠÙ„ ØªÙ…Ø§Ø±ÙŠÙ†Ùƒ ÙˆØ£ÙˆØ²Ø§Ù†Ùƒ ÙˆØªØ·ÙˆØ±Ùƒ Ø£Ø³Ø¨ÙˆØ¹ÙŠÙ‹Ø§.</p>
        </div>
      </div>
      <div class="badge-small">
        Ù†Ø³Ø®Ø© Ø£ÙˆÙ„ÙŠØ© ØªØ¬Ø±ÙŠØ¨ÙŠØ© â€“ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ØªÙØ­ÙØ¸ Ø¹Ù„Ù‰ Ø¬Ù‡Ø§Ø²Ùƒ ÙÙ‚Ø· (localStorage)
      </div>
    </div>

    <!-- Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ -->
    <div class="card">
      <div class="card-header">
        <h2>Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨</h2>
        <span>ØªÙØ­ÙØ¸ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§ Ø¹Ù†Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</span>
      </div>
      <div class="two-col">
        <div>
          <label for="athlete-name">Ø§Ù„Ø§Ø³Ù…</label>
          <input id="athlete-name" type="text" placeholder="Ù…Ø«Ø§Ù„: Ø£Ø­Ù…Ø¯ Ù…Ø­Ù…Ø¯" />
        </div>
        <div>
          <label for="athlete-phone">Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„ (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <input id="athlete-phone" type="text" placeholder="05xxxxxxxx" />
        </div>
        <div>
          <label for="start-date">ØªØ§Ø±ÙŠØ® Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„ØªØ­Ø¯ÙŠ</label>
          <input id="start-date" type="date" />
        </div>
        <div>
          <label for="main-goal">Ù‡Ø¯ÙÙƒ Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠ</label>
          <select id="main-goal">
            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù‡Ø¯Ùâ€¦</option>
            <option value="loss">Ø®Ø³Ø§Ø±Ø© Ø¯Ù‡ÙˆÙ†/ÙˆØ²Ù†</option>
            <option value="maintain">Ø§Ù„Ø­ÙØ§Ø¸ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ²Ù†/Ø§Ù„ÙƒØªÙ„Ø©</option>
            <option value="bulk">Ø²ÙŠØ§Ø¯Ø© ÙƒØªÙ„Ø© Ø¹Ø¶Ù„ÙŠØ© (Ø¶Ø®Ø§Ù…Ø©)</option>
          </select>
        </div>
      </div>
      <div style="margin-top:10px;">
        <label for="goal-notes">Ø£Ù‡Ø¯Ø§ÙÙŠ Ø¨Ø§Ù„ØªÙØµÙŠÙ„</label>
        <textarea id="goal-notes" placeholder="Ø§ÙƒØªØ¨ Ù‡Ù†Ø§ Ø£Ù‡Ø¯Ø§ÙÙƒ Ø¨Ø§Ù„Ø£Ø±Ù‚Ø§Ù…: ÙˆØ²Ù† Ù…Ø³ØªÙ‡Ø¯ÙØŒ Ù‚ÙŠØ§Ø³Ø§ØªØŒ Ù‚ÙˆØ© ÙÙŠ ØªÙ…Ø§Ø±ÙŠÙ† Ù…Ø¹ÙŠÙ†Ø©â€¦"></textarea>
        <div class="hint">
          Ø­Ø§ÙˆÙ„ ØªÙƒØªØ¨ Ø£Ù‡Ø¯Ø§Ù ÙˆØ§Ø¶Ø­Ø© ÙˆÙ…Ø­Ø¯Ø¯Ø© Ø¨Ø²Ù…Ù† (SMART) â€“ Ù‡Ø°Ø§ ÙŠØ³Ø§Ø¹Ø¯Ùƒ ØªØªØ§Ø¨Ø¹ ØªÙ‚Ø¯Ù…Ùƒ Ø®Ù„Ø§Ù„ 90 ÙŠÙˆÙ….
        </div>
      </div>
    </div>

    <!-- Ø³Ø¬Ù„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠ -->
    <div class="card">
      <div class="card-header">
        <h2>Ø³Ø¬Ù„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„ÙŠÙˆÙ…ÙŠ</h2>
        <span>Ø§Ø®ØªØ± Ø§Ù„ÙŠÙˆÙ…ØŒ Ø«Ù… Ø£Ø¶Ù Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† ÙˆØ§Ù„Ø¬Ù„Ø³Ø§Øª ÙˆØ§Ø­ÙØ¸ Ø§Ù„ÙŠÙˆÙ…</span>
      </div>

      <div class="two-col" style="margin-bottom:10px;">
        <div>
          <label for="training-date">Ø§Ù„ØªØ§Ø±ÙŠØ® / Ø§Ù„ÙŠÙˆÙ…</label>
          <input id="training-date" type="date" />
          <div class="hint">
            Ø¥Ø°Ø§ ØºÙŠÙ‘Ø±Øª Ø§Ù„ØªØ§Ø±ÙŠØ®ØŒ Ø³ÙŠØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø© Ù„Ø°Ù„Ùƒ Ø§Ù„ÙŠÙˆÙ… (Ø¥Ù† ÙˆÙØ¬Ø¯Øª).
          </div>
        </div>
        <div>
          <label>Ù…Ù„Ø®Øµ Ø³Ø±ÙŠØ¹ Ù„Ù„ÙŠÙˆÙ… (Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</label>
          <input id="day-summary" type="text" placeholder="Ù…Ø«Ø§Ù„: ØµØ¯Ø± + ØªØ±Ø§ÙŠ | Ø¥Ø­Ø³Ø§Ø³ Ù…Ù…ØªØ§Ø² | Ù†ÙˆÙ… Ù‚Ù„ÙŠÙ„" />
        </div>
      </div>

      <div class="exercise-table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Ø§Ù„ØªÙ…Ø±ÙŠÙ†</th>
              <th>Ø§Ù„Ø¬Ù„Ø³Ø© 1<br />WGT / REP</th>
              <th>Ø§Ù„Ø¬Ù„Ø³Ø© 2<br />WGT / REP</th>
              <th>Ø§Ù„Ø¬Ù„Ø³Ø© 3<br />WGT / REP</th>
              <th>Ø§Ù„Ø¬Ù„Ø³Ø© 4<br />WGT / REP</th>
              <th>Ø§Ù„Ø¬Ù„Ø³Ø© 5<br />WGT / REP</th>
            </tr>
          </thead>
          <tbody id="exercise-rows">
            <!-- ÙŠØªÙ… ØªØ¹Ø¨Ø¦ØªÙ‡Ø§ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠÙ‹Ø§ -->
          </tbody>
        </table>
      </div>

      <div class="actions-row">
        <div style="display:flex; gap:8px; flex-wrap:wrap;">
          <button type="button" class="btn btn-outline" id="btn-add-exercise">
            + Ø¥Ø¶Ø§ÙØ© ØªÙ…Ø±ÙŠÙ†
          </button>
          <button type="button" class="btn btn-outline" id="btn-clear-day">
            Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ…
          </button>
        </div>
        <button type="button" class="btn btn-primary" id="btn-save-day">
          ğŸ’¾ Ø­ÙØ¸ Ø§Ù„ÙŠÙˆÙ…
        </button>
      </div>

      <div class="pill-info">
        <span>â„¹ï¸</span>
        <span>ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ø¶Ø§ÙØ© Ø¹Ø¯Ø¯ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ† Ø§Ù„Ù„ÙŠ ØªØ­ØªØ§Ø¬Ù‡ØŒ ÙˆÙƒÙ„ ÙŠÙˆÙ… ÙŠÙØ®Ø²Ù† Ø¨Ø´ÙƒÙ„ Ù…Ø³ØªÙ‚Ù„ ÙÙŠ Ø¬Ù‡Ø§Ø²Ùƒ.</span>
      </div>

      <hr style="border:none; border-top:1px solid #111827; margin:14px 0;" />

      <!-- ÙƒØ§Ø±Ø¯ÙŠÙˆ + Ù…Ù„Ø§Ø­Ø¸Ø§Øª -->
      <div class="sub-grid">
        <div>
          <label for="cardio-time">Ø§Ù„ÙƒØ§Ø±Ø¯ÙŠÙˆ â€“ Ø§Ù„ÙˆÙ‚Øª (Ø¯Ù‚Ø§Ø¦Ù‚)</label>
          <input id="cardio-time" type="number" min="0" placeholder="Ù…Ø«Ø§Ù„: 20" />
        </div>
        <div>
          <label for="cardio-level">Ø§Ù„ÙƒØ§Ø±Ø¯ÙŠÙˆ â€“ Ù…Ø³ØªÙˆÙ‰/Ø´Ø¯Ø©</label>
          <input id="cardio-level" type="text" placeholder="Ù…Ø«Ø§Ù„: Ù…Ø´ÙŠ Ø³Ø±ÙŠØ¹ØŒ Ø¬Ø±ÙŠ Ø®ÙÙŠÙâ€¦" />
        </div>
        <div>
          <label for="cardio-calories">Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø±ÙˆÙ‚Ø© (ØªÙ‚Ø±ÙŠØ¨ÙŠØ©)</label>
          <input id="cardio-calories" type="number" min="0" placeholder="Ù…Ø«Ø§Ù„: 180" />
        </div>
      </div>

      <div style="margin-top:10px;">
        <label for="day-notes">Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø§Ù„ÙŠÙˆÙ…</label>
        <textarea id="day-notes" placeholder="Ø£ÙƒØªØ¨ Ø¥Ø­Ø³Ø§Ø³ÙƒØŒ Ù†ÙˆÙ…ÙƒØŒ ØªØºØ°ÙŠØªÙƒØŒ Ø£Ùˆ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø© ØªØ­Ø¨ ØªØ±Ø¬Ø¹ Ù„Ù‡Ø§ Ù„Ø§Ø­Ù‚Ù‹Ø§."></textarea>
      </div>
    </div>

    <div class="footer-note">
      * Ù‡Ø°Ù‡ Ù†Ø³Ø®Ø© Ø£ÙˆÙ„ÙŠØ© Ù…Ù† Ø¯ÙØªØ± ØªØ­Ø¯ÙŠ 90 ÙŠÙˆÙ…. ØªØ§Ø¨Ø¹ Ø§Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙƒÙ… ÙŠÙˆÙ…ØŒ ÙˆØ¨Ø¹Ø¯Ù‡Ø§ Ù†Ø·ÙˆØ±Ù‡Ø§ Ø³ÙˆØ§ (Ø¥Ø¶Ø§ÙØ© Ù‚ÙŠØ§Ø³Ø§Øª Ø£Ø³Ø¨ÙˆØ¹ÙŠØ©ØŒ ØªØ­Ø¯ÙŠ 30 ÙŠÙˆÙ…ØŒ ØªÙ‚Ø§Ø±ÙŠØ±â€¦).
    </div>
  </div>

  <script>
    // Ù…ÙØªØ§Ø­ Ø§Ù„ØªØ®Ø²ÙŠÙ† ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ (localStorage)
    const STORAGE_KEY = "ff90_challenge_v1";

    // Ø¹Ù†Ø§ØµØ± Ø§Ù„ØµÙØ­Ø©
    const athleteNameInput = document.getElementById("athlete-name");
    const athletePhoneInput = document.getElementById("athlete-phone");
    const startDateInput = document.getElementById("start-date");
    const mainGoalSelect = document.getElementById("main-goal");
    const goalNotesTextarea = document.getElementById("goal-notes");

    const trainingDateInput = document.getElementById("training-date");
    const daySummaryInput = document.getElementById("day-summary");
    const exerciseRowsTbody = document.getElementById("exercise-rows");
    const cardioTimeInput = document.getElementById("cardio-time");
    const cardioLevelInput = document.getElementById("cardio-level");
    const cardioCaloriesInput = document.getElementById("cardio-calories");
    const dayNotesTextarea = document.getElementById("day-notes");

    const btnAddExercise = document.getElementById("btn-add-exercise");
    const btnSaveDay = document.getElementById("btn-save-day");
    const btnClearDay = document.getElementById("btn-clear-day");

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø£Ùˆ Ø¥Ù†Ø´Ø§Ø¡ Ù‡ÙŠÙƒÙ„ Ø¬Ø¯ÙŠØ¯
    function loadAllData() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) {
          return {
            athlete: {
              name: "",
              phone: "",
              startDate: "",
              mainGoal: "",
              goalNotes: "",
            },
            days: {}, // Ù…ÙØªØ§Ø­ = ØªØ§Ø±ÙŠØ® (YYYY-MM-DD)
          };
        }
        return JSON.parse(raw);
      } catch (e) {
        console.error("Error parsing stored data", e);
        return {
          athlete: {
            name: "",
            phone: "",
            startDate: "",
            mainGoal: "",
            goalNotes: "",
          },
          days: {},
        };
      }
    }

    function saveAllData(data) {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(data));
    }

    let state = loadAllData();

    // ØªÙ‡ÙŠØ¦Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ ÙÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„
    function populateAthlete() {
      const a = state.athlete;
      athleteNameInput.value = a.name || "";
      athletePhoneInput.value = a.phone || "";
      startDateInput.value = a.startDate || "";
      mainGoalSelect.value = a.mainGoal || "";
      goalNotesTextarea.value = a.goalNotes || "";
    }

    // Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…ØªØ¯Ø±Ø¨ ÙÙŠ ÙƒÙ„ ØªØºÙŠÙŠØ±
    function attachAthleteListeners() {
      athleteNameInput.addEventListener("input", () => {
        state.athlete.name = athleteNameInput.value.trim();
        saveAllData(state);
      });
      athletePhoneInput.addEventListener("input", () => {
        state.athlete.phone = athletePhoneInput.value.trim();
        saveAllData(state);
      });
      startDateInput.addEventListener("change", () => {
        state.athlete.startDate = startDateInput.value;
        saveAllData(state);
      });
      mainGoalSelect.addEventListener("change", () => {
        state.athlete.mainGoal = mainGoalSelect.value;
        saveAllData(state);
      });
      goalNotesTextarea.addEventListener("input", () => {
        state.athlete.goalNotes = goalNotesTextarea.value.trim();
        saveAllData(state);
      });
    }

    // Ø¥Ù†Ø´Ø§Ø¡ ØµÙ ØªÙ…Ø±ÙŠÙ† Ø¬Ø¯ÙŠØ¯
    function createExerciseRow(rowData = null) {
      const tr = document.createElement("tr");
      tr.className = "exercise-row";

      // Ø®Ù„ÙŠØ© Ø§Ø³Ù… Ø§Ù„ØªÙ…Ø±ÙŠÙ†
      const nameTd = document.createElement("td");
      const nameInput = document.createElement("input");
      nameInput.type = "text";
      nameInput.className = "exercise-input";
      nameInput.placeholder = "Ù…Ø«Ø§Ù„: Bench Press / Ø³ÙƒÙˆØ§Øª";
      nameInput.value = rowData?.name || "";
      nameTd.appendChild(nameInput);
      tr.appendChild(nameTd);

      // 5 Ø¬Ù„Ø³Ø§Øª
      for (let i = 0; i < 5; i++) {
        const td = document.createElement("td");
        const group = document.createElement("div");
        group.className = "set-group";

        const wInput = document.createElement("input");
        wInput.type = "number";
        wInput.min = "0";
        wInput.placeholder = "ÙˆØ²Ù†";
        wInput.className = "set-field";

        const rInput = document.createElement("input");
        rInput.type = "number";
        rInput.min = "0";
        rInput.placeholder = "ØªÙƒØ±Ø§Ø±";
        rInput.className = "set-field";

        if (rowData && rowData.sets && rowData.sets[i]) {
          wInput.value = rowData.sets[i].w || "";
          rInput.value = rowData.sets[i].r || "";
        }

        group.appendChild(wInput);
        group.appendChild(rInput);
        td.appendChild(group);
        tr.appendChild(td);
      }

      exerciseRowsTbody.appendChild(tr);
    }

    // ØªÙ†Ø¸ÙŠÙ Ø¬Ø¯ÙˆÙ„ Ø§Ù„ØªÙ…Ø§Ø±ÙŠÙ†
    function clearExerciseRows() {
      exerciseRowsTbody.innerHTML = "";
    }

    // ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª ÙŠÙˆÙ… Ù…Ø¹ÙŠÙ† ÙÙŠ Ø§Ù„Ø­Ù‚ÙˆÙ„
    function populateDay(dateStr) {
      clearExerciseRows();

      const day = state.days[dateStr];
      if (!day) {
        // ÙŠÙˆÙ… Ø¬Ø¯ÙŠØ¯ â†’ Ù†Ø¹Ù…Ù„ 3 ØµÙÙˆÙ Ø§ÙØªØ±Ø§Ø¶ÙŠØ©
        for (let i = 0; i < 3; i++) createExerciseRow();
        daySummaryInput.value = "";
        cardioTimeInput.value = "";
        cardioLevelInput.value = "";
        cardioCaloriesInput.value = "";
        dayNotesTextarea.value = "";
        return;
      }

      daySummaryInput.value = day.summary || "";
      cardioTimeInput.value = day.cardio?.time || "";
      cardioLevelInput.value = day.cardio?.level || "";
      cardioCaloriesInput.value = day.cardio?.calories || "";
      dayNotesTextarea.value = day.notes || "";

      if (day.exercises && day.exercises.length) {
        day.exercises.forEach((ex) => createExerciseRow(ex));
      } else {
        for (let i = 0; i < 3; i++) createExerciseRow();
      }
    }

    // Ø¬Ù…Ø¹ Ø¨ÙŠØ§Ù†Ø§Øª ÙŠÙˆÙ… Ù…Ù† Ø§Ù„Ø­Ù‚ÙˆÙ„
    function collectDayFromUI(dateStr) {
      const rows = Array.from(
        exerciseRowsTbody.querySelectorAll(".exercise-row")
      );

      const exercises = rows
        .map((row) => {
          const nameInput = row.querySelector(".exercise-input");
          const setFields = Array.from(row.querySelectorAll(".set-field"));

          const name = (nameInput.value || "").trim();
          if (!name && setFields.every((f) => !f.value)) {
            // ØµÙ ÙØ§Ø¶ÙŠ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ â†’ Ù†ØªØ¬Ø§Ù‡Ù„Ù‡
            return null;
          }

          const sets = [];
          for (let i = 0; i < setFields.length; i += 2) {
            const w = setFields[i].value;
            const r = setFields[i + 1].value;
            if (!w && !r) {
              sets.push({ w: "", r: "" });
            } else {
              sets.push({ w, r });
            }
          }

          return { name, sets };
        })
        .filter(Boolean);

      return {
        summary: daySummaryInput.value.trim(),
        exercises,
        cardio: {
          time: cardioTimeInput.value || "",
          level: cardioLevelInput.value.trim(),
          calories: cardioCaloriesInput.value || "",
        },
        notes: dayNotesTextarea.value.trim(),
        updatedAt: new Date().toISOString(),
      };
    }

    // Ø­ÙØ¸ Ø§Ù„ÙŠÙˆÙ…
    function saveCurrentDay() {
      const dateStr = trainingDateInput.value;
      if (!dateStr) {
        alert("Ø§Ø®ØªØ± ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… Ø£ÙˆÙ„Ø§Ù‹ Ù‚Ø¨Ù„ Ø§Ù„Ø­ÙØ¸.");
        return;
      }
      const dayData = collectDayFromUI(dateStr);
      state.days[dateStr] = dayData;
      saveAllData(state);
      alert("ØªÙ… Ø­ÙØ¸ Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… âœ…");
    }

    // Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙŠÙˆÙ… Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© (Ù…Ø¹ Ø³Ø¤Ø§Ù„ ØªØ£ÙƒÙŠØ¯)
    function clearCurrentDayUI() {
      const dateStr = trainingDateInput.value;
      if (!dateStr) {
        clearExerciseRows();
        for (let i = 0; i < 3; i++) createExerciseRow();
        daySummaryInput.value = "";
        cardioTimeInput.value = "";
        cardioLevelInput.value = "";
        cardioCaloriesInput.value = "";
        dayNotesTextarea.value = "";
        return;
      }

      const sure = confirm(
        "Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø¨ÙŠØ§Ù†Ø§Øª Ù‡Ø°Ø§ Ø§Ù„ÙŠÙˆÙ… Ù…Ù† Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¢Ù† (Ù„Ù† ØªÙØ²Ø§Ù„ Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø¥Ù„Ø§ Ø¥Ø°Ø§ Ø­ÙØ¸Øª Ø¨Ø¹Ø¯ Ø§Ù„Ù…Ø³Ø­). Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ØŸ"
      );
      if (!sure) return;

      populateDay(dateStr); // Ù†Ø¹ÙŠØ¯ ØªØ­Ù…ÙŠÙ„Ù‡ ÙØ§Ø±Øº/Ù…Ù† Ø§Ù„ØªØ®Ø²ÙŠÙ†
      clearExerciseRows();
      for (let i = 0; i < 3; i++) createExerciseRow();
      daySummaryInput.value = "";
      cardioTimeInput.value = "";
      cardioLevelInput.value = "";
      cardioCaloriesInput.value = "";
      dayNotesTextarea.value = "";
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø£ÙˆÙ„ÙŠØ© Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    function init() {
      state = loadAllData();
      populateAthlete();
      attachAthleteListeners();

      // Ø¬Ø¹Ù„ ØªØ§Ø±ÙŠØ® Ø§Ù„ÙŠÙˆÙ… Ø§ÙØªØ±Ø§Ø¶ÙŠÙ‹Ø§
      if (!trainingDateInput.value) {
        const today = new Date();
        const yyyy = today.getFullYear();
        const mm = String(today.getMonth() + 1).padStart(2, "0");
        const dd = String(today.getDate()).padStart(2, "0");
        trainingDateInput.value = `${yyyy}-${mm}-${dd}`;
      }

      populateDay(trainingDateInput.value);

      btnAddExercise.addEventListener("click", () => createExerciseRow());
      btnSaveDay.addEventListener("click", saveCurrentDay);
      btnClearDay.addEventListener("click", clearCurrentDayUI);

      trainingDateInput.addEventListener("change", () => {
        populateDay(trainingDateInput.value);
      });
    }

    document.addEventListener("DOMContentLoaded", init);
  </script>
</body>
</html>
